import { IoCheckmarkDoneOutline } from "react-icons/io5";
import { HiDotsHorizontal } from "react-icons/hi";
import { useState,useEffect,useRef } from "react";


function SentMessage({handleMessageClick}) {
  const [overlay,setOverlay] = useState(false)
  const overlayRef = useRef(null);

  useEffect(() => {
    function handleClickOutside(event) {
      if (overlayRef.current && !overlayRef.current.contains(event.target)) {
        setOverlay(false);
      }
    }
  
    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, [overlayRef]);
  
  return (
    <div className='relative  max-w-full md:max-w-[50%] group self-end my-2 mr-2 flex items-center ml-[10%]'>
      <div ref={overlayRef} className={`${overlay ? "block" : "hidden"} absolute -left-48 -bottom-32 z-10 rounded-xl bg-white`}>
        <div className='flex hover:rounded-xl pl-3 pr-24 hover:cursor-pointer py-4 hover:bg-slate-50'>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20.5 22.75H3.5C3.09 22.75 2.75 22.41 2.75 22C2.75 21.59 3.09 21.25 3.5 21.25H20.5C20.91 21.25 21.25 21.59 21.25 22C21.25 22.41 20.91 22.75 20.5 22.75Z"
              fill="black"
            />
            <path
              d="M18.9999 18.25C18.8099 18.25 18.6199 18.18 18.4699 18.03L4.46994 4.03C4.17994 3.74 4.17994 3.26 4.46994 2.97C4.75994 2.68 5.23994 2.68 5.52994 2.97L19.5299 16.97C19.8199 17.26 19.8199 17.74 19.5299 18.03C19.3799 18.18 19.1899 18.25 18.9999 18.25Z"
              fill="black"
            />
            <path
              d="M5 14.52C4.59 14.52 4.25 14.18 4.25 13.77V3.5C4.25 3.09 4.59 2.75 5 2.75H15.27C15.68 2.75 16.02 3.09 16.02 3.5C16.02 3.91 15.68 4.25 15.27 4.25H5.75V13.77C5.75 14.18 5.41 14.52 5 14.52Z"
              fill="black"
            />
          </svg>
          <h3>Forward</h3>
        </div>
        <div className='flex pl-3 pr-24 hover:cursor-pointer py-4 hover:bg-slate-50'>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17.6601 22.67C17.1301 22.67 16.4501 22.5 15.6001 22L12.6101 20.23C12.3001 20.05 11.7001 20.05 11.4001 20.23L8.40012 22C6.63012 23.05 5.59012 22.63 5.12012 22.29C4.66012 21.95 3.94012 21.08 4.41012 19.08L5.12012 16.01C5.20012 15.69 5.04012 15.14 4.80012 14.9L2.32012 12.42C1.08012 11.18 1.18012 10.12 1.35012 9.60001C1.52012 9.08001 2.06012 8.16001 3.78012 7.87001L6.97012 7.34001C7.27012 7.29001 7.70012 6.97001 7.83012 6.70001L9.60012 3.17001C10.4001 1.56001 11.4501 1.32001 12.0001 1.32001C12.5501 1.32001 13.6001 1.56001 14.4001 3.17001L16.1601 6.69001C16.3001 6.96001 16.7301 7.28001 17.0301 7.33001L20.2201 7.86001C21.9501 8.15001 22.4901 9.07001 22.6501 9.59001C22.8101 10.11 22.9101 11.17 21.6801 12.41L19.2001 14.9C18.9601 15.14 18.8101 15.68 18.8801 16.01L19.5901 19.08C20.0501 21.08 19.3401 21.95 18.8801 22.29C18.6301 22.47 18.2301 22.67 17.6601 22.67ZM12.0001 18.59C12.4901 18.59 12.9801 18.71 13.3701 18.94L16.3601 20.71C17.2301 21.23 17.7801 21.23 17.9901 21.08C18.2001 20.93 18.3501 20.4 18.1301 19.42L17.4201 16.35C17.2301 15.52 17.5401 14.45 18.1401 13.84L20.6201 11.36C21.1101 10.87 21.3301 10.39 21.2301 10.06C21.1201 9.73001 20.6601 9.46001 19.9801 9.35001L16.7901 8.82001C16.0201 8.69001 15.1801 8.07001 14.8301 7.37001L13.0701 3.85001C12.7501 3.21001 12.3501 2.83001 12.0001 2.83001C11.6501 2.83001 11.2501 3.21001 10.9401 3.85001L9.17012 7.37001C8.82012 8.07001 7.98012 8.69001 7.21012 8.82001L4.03012 9.35001C3.35012 9.46001 2.89012 9.73001 2.78012 10.06C2.67012 10.39 2.90012 10.88 3.39012 11.36L5.87012 13.84C6.47012 14.44 6.78012 15.52 6.59012 16.35L5.88012 19.42C5.65012 20.41 5.81012 20.93 6.02012 21.08C6.23012 21.23 6.77012 21.22 7.65012 20.71L10.6401 18.94C11.0201 18.71 11.5101 18.59 12.0001 18.59Z"
              fill="black"
            />
          </svg>
          <h3>Pin</h3>
        </div>
        <div className='flex pl-3 pr-24 hover:cursor-pointer py-4 hover:bg-slate-50'>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H11C11.41 1.25 11.75 1.59 11.75 2C11.75 2.41 11.41 2.75 11 2.75H9C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V13C21.25 12.59 21.59 12.25 22 12.25C22.41 12.25 22.75 12.59 22.75 13V15C22.75 20.43 20.43 22.75 15 22.75Z"
              fill="black"
            />
            <path
              d="M8.49984 17.69C7.88984 17.69 7.32984 17.47 6.91984 17.07C6.42984 16.58 6.21984 15.87 6.32984 15.12L6.75984 12.11C6.83984 11.53 7.21984 10.78 7.62984 10.37L15.5098 2.49C17.4998 0.499998 19.5198 0.499998 21.5098 2.49C22.5998 3.58 23.0898 4.69 22.9898 5.8C22.8998 6.7 22.4198 7.58 21.5098 8.48L13.6298 16.36C13.2198 16.77 12.4698 17.15 11.8898 17.23L8.87984 17.66C8.74984 17.69 8.61984 17.69 8.49984 17.69ZM16.5698 3.55L8.68984 11.43C8.49984 11.62 8.27984 12.06 8.23984 12.32L7.80984 15.33C7.76984 15.62 7.82984 15.86 7.97984 16.01C8.12984 16.16 8.36984 16.22 8.65984 16.18L11.6698 15.75C11.9298 15.71 12.3798 15.49 12.5598 15.3L20.4398 7.42C21.0898 6.77 21.4298 6.19 21.4798 5.65C21.5398 5 21.1998 4.31 20.4398 3.54C18.8398 1.94 17.7398 2.39 16.5698 3.55Z"
              fill="black"
            />
            <path
              d="M19.8501 9.83003C19.7801 9.83003 19.7101 9.82003 19.6501 9.80003C17.0201 9.06003 14.9301 6.97003 14.1901 4.34003C14.0801 3.94003 14.3101 3.53003 14.7101 3.41003C15.1101 3.30003 15.5201 3.53003 15.6301 3.93003C16.2301 6.06003 17.9201 7.75003 20.0501 8.35003C20.4501 8.46003 20.6801 8.88003 20.5701 9.28003C20.4801 9.62003 20.1801 9.83003 19.8501 9.83003Z"
              fill="black"
            />
          </svg>
          <h3>Edit</h3>
        </div>
        <div className='flex pl-3 pr-24 hover:cursor-pointer py-4 hover:bg-slate-50'>
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21.0002 6.72998C20.9802 6.72998 20.9502 6.72998 20.9202 6.72998C15.6302 6.19998 10.3502 5.99998 5.12016 6.52998L3.08016 6.72998C2.66016 6.76998 2.29016 6.46998 2.25016 6.04998C2.21016 5.62998 2.51016 5.26998 2.92016 5.22998L4.96016 5.02998C10.2802 4.48998 15.6702 4.69998 21.0702 5.22998C21.4802 5.26998 21.7802 5.63998 21.7402 6.04998C21.7102 6.43998 21.3802 6.72998 21.0002 6.72998Z"
              fill="black"
            />
            <path
              d="M8.49977 5.72C8.45977 5.72 8.41977 5.72 8.36977 5.71C7.96977 5.64 7.68977 5.25 7.75977 4.85L7.97977 3.54C8.13977 2.58 8.35977 1.25 10.6898 1.25H13.3098C15.6498 1.25 15.8698 2.63 16.0198 3.55L16.2398 4.85C16.3098 5.26 16.0298 5.65 15.6298 5.71C15.2198 5.78 14.8298 5.5 14.7698 5.1L14.5498 3.8C14.4098 2.93 14.3798 2.76 13.3198 2.76H10.6998C9.63977 2.76 9.61977 2.9 9.46977 3.79L9.23977 5.09C9.17977 5.46 8.85977 5.72 8.49977 5.72Z"
              fill="black"
            />
            <path
              d="M15.2099 22.75H8.7899C5.2999 22.75 5.1599 20.82 5.0499 19.26L4.3999 9.19001C4.3699 8.78001 4.6899 8.42001 5.0999 8.39001C5.5199 8.37001 5.8699 8.68001 5.8999 9.09001L6.5499 19.16C6.6599 20.68 6.6999 21.25 8.7899 21.25H15.2099C17.3099 21.25 17.3499 20.68 17.4499 19.16L18.0999 9.09001C18.1299 8.68001 18.4899 8.37001 18.8999 8.39001C19.3099 8.42001 19.6299 8.77001 19.5999 9.19001L18.9499 19.26C18.8399 20.82 18.6999 22.75 15.2099 22.75Z"
              fill="black"
            />
            <path
              d="M13.6601 17.25H10.3301C9.92008 17.25 9.58008 16.91 9.58008 16.5C9.58008 16.09 9.92008 15.75 10.3301 15.75H13.6601C14.0701 15.75 14.4101 16.09 14.4101 16.5C14.4101 16.91 14.0701 17.25 13.6601 17.25Z"
              fill="black"
            />
            <path
              d="M14.5 13.25H9.5C9.09 13.25 8.75 12.91 8.75 12.5C8.75 12.09 9.09 11.75 9.5 11.75H14.5C14.91 11.75 15.25 12.09 15.25 12.5C15.25 12.91 14.91 13.25 14.5 13.25Z"
              fill="black"
            />
          </svg>
          <h3>Delete</h3>
        </div>
      </div>
        <HiDotsHorizontal onClick={() =>setOverlay(true)} className='absolute -left-6 text-[#AEAEB2] hidden size-6 md:group-hover:block hover:cursor-pointer '/>
        <div className="group w-1 h-1"></div>
        <div onClick={handleMessageClick} className=' py-1 px-4 rounded-l-2xl rounded-t-2xl text-[#FFF] mr-2 bg-primary'>
            <p className="pr-5 break-all">meessage content ijijijijijijijijijijijijijijijijijijijijijijijijijijijijijijijijijiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiissssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssi</p>
            <div className='flex justify-end items-center'>
                <p className="mr-1">11:00</p>
                <IoCheckmarkDoneOutline />
            </div>
        </div>
    </div>
  )
}

export default SentMessage
